function S(i,t="air",s=50){const n=i.weight||10;let o=0;if(i.type==="circle"){const c=i.radius||50;o=Math.PI*c*c}else if(i.type==="rectangle")o=(i.w||100)*(i.h||100);else if(i.type==="custom"&&i.customPath){const c=i.customPath;let h=0;for(let l=0;l<c.length;l++){const r=(l+1)%c.length;h+=c[l].x*c[r].y-c[r].x*c[l].y}o=Math.abs(h/2)}const a=Math.ceil(n/s),e=Math.ceil(o/1e4);return Math.max(a,e,1)}function F(i,t){const s=i.radius||50,n=[],o=2*Math.PI/t;for(let a=0;a<t;a++){const e=a*o;n.push({x:s*Math.cos(e),y:s*Math.sin(e)})}return n}function k(i,t){const s=i.w||100,n=i.h||100,a=2*(s+n)/t,e=[];for(let c=0;c<t;c++){const h=c*a;let l,r;h<s?(l=-s/2+h,r=-n/2):h<s+n?(l=s/2,r=-n/2+(h-s)):h<2*s+n?(l=s/2-(h-s-n),r=n/2):(l=-s/2,r=n/2-(h-2*s-n)),e.push({x:l,y:r})}return e}function A(i,t){if(!i.customPath||i.customPath.length<3)return F(i,t);const s=i.customPath;let n=0;for(let e=0;e<s.length;e++){const c=s[e],h=s[(e+1)%s.length],l=h.x-c.x,r=h.y-c.y;n+=Math.sqrt(l*l+r*r)}const o=n/t,a=[];for(let e=0;e<t;e++){const c=e*o;let h=0;for(let l=0;l<s.length;l++){const r=s[l],f=s[(l+1)%s.length],g=f.x-r.x,p=f.y-r.y,M=Math.sqrt(g*g+p*p);if(h+M>=c){const w=(c-h)/M;a.push({x:r.x+g*w,y:r.y+p*w});break}h+=M}}return a}function d(i,t){const s=i.radius||50,n=[];if(t===1)n.push({x:0,y:0});else if(t<=3){const o=2*Math.PI/t;for(let a=0;a<t;a++){const e=a*o,c=s*.6;n.push({x:c*Math.cos(e),y:c*Math.sin(e)})}}else{const o=Math.ceil(Math.sqrt(t));let a=0;for(let e=0;e<o&&a<t;e++){const c=s*(e+.5)/o,h=e===0?1:Math.ceil((t-1)*(e+1)/(o*(o+1)/2)),l=t-a,r=Math.min(h,l);if(e===0)n.push({x:0,y:0}),a++;else{const f=2*Math.PI/r;for(let g=0;g<r&&a<t;g++){const p=g*f;n.push({x:c*Math.cos(p),y:c*Math.sin(p)}),a++}}}}return n.slice(0,t)}function D(i,t){const s=i.w||100,n=i.h||100,o=s/n;let a=Math.ceil(Math.sqrt(t*o)),e=Math.ceil(t/a);const c=[],h=s/(a+1),l=n/(e+1);for(let r=0;r<e;r++)for(let f=0;f<a&&!(c.length>=t);f++)c.push({x:-s/2+h*(f+1),y:-n/2+l*(r+1)});return c.slice(0,t)}function E(i,t){if(!i.customPath||i.customPath.length<3)return d(i,t);const s=i.customPath;let n=1/0,o=-1/0,a=1/0,e=-1/0;s.forEach(u=>{n=Math.min(n,u.x),o=Math.max(o,u.x),a=Math.min(a,u.y),e=Math.max(e,u.y)});const c=o-n,h=e-a,l=(n+o)/2,r=(a+e)/2,f=[],g=Math.ceil(Math.sqrt(t*(c/h))),p=Math.ceil(t/g),M=c/(g+1),q=h/(p+1),w=(u,m)=>{let x=!1;for(let y=0,P=s.length-1;y<s.length;P=y++){const R=s[y].x,I=s[y].y,Y=s[P].x,X=s[P].y;I>m!=X>m&&u<(Y-R)*(m-I)/(X-I)+R&&(x=!x)}return x};for(let u=0;u<p*2;u++){for(let m=0;m<g*2&&!(f.length>=t);m++){const x=n+M*(m+.5),y=a+q*(u+.5);w(x,y)&&f.push({x:x-l,y:y-r})}if(f.length>=t)break}return f.slice(0,t)}function O(i,t,s="air"){if(s==="ground")switch(i.type){case"circle":return F(i,t);case"rectangle":return k(i,t);case"custom":return A(i,t);default:return F(i,t)}else switch(i.type){case"circle":return d(i,t);case"rectangle":return D(i,t);case"custom":return E(i,t);default:return d(i,t)}}export{d as calculateAirCircleFormation,E as calculateAirCustomFormation,D as calculateAirRectangleFormation,O as calculateFormation,F as calculateGroundCircleFormation,A as calculateGroundCustomFormation,k as calculateGroundRectangleFormation,S as calculateRequiredDrones};
